{"ast":null,"code":"import axios from \"axios\";\nconst cache = {};\nexport async function getOption(path) {\n  if (cache[path]) {\n    return cache[path];\n  }\n  try {\n    const response = await axios.get(`http://${process.env.REACT_APP_NETWORK}:${process.env.REACT_APP_PORT}/${path}`, {\n      headers: {\n        Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n      }\n    });\n    let data = response.data;\n    if (typeof data === \"string\") {\n      data = JSON.parse(data);\n    }\n    const options = data.data.map(([id, name]) => ({\n      id,\n      name\n    }));\n    cache[path] = options; // Cache the result\n\n    return options;\n  } catch (error) {\n    console.error(`Failed to fetch ${path}:`, error);\n    return [];\n  }\n}\nexport async function getAllOptions() {\n  const paths = {\n    suppliers: \"supplierDetails\",\n    consignees: \"consignee\",\n    emptyLocations: \"unloadVenue\",\n    status: \"status\",\n    type: \"containerType\",\n    shipping: \"shippingDocument\"\n  };\n\n  // Promise.all to fetch all simultaneously\n  const results = await Promise.all(Object.values(paths).map(path => getOption(path)));\n  return Object.keys(paths).reduce((acc, key, idx) => {\n    acc[key] = results[idx];\n    return acc;\n  }, {});\n}","map":{"version":3,"names":["axios","cache","getOption","path","response","get","process","env","REACT_APP_NETWORK","REACT_APP_PORT","headers","Authorization","localStorage","getItem","data","JSON","parse","options","map","id","name","error","console","getAllOptions","paths","suppliers","consignees","emptyLocations","status","type","shipping","results","Promise","all","Object","values","keys","reduce","acc","key","idx"],"sources":["D:/WorkPlace/Seychelles_Sahaj/containermgmt/src/component/Pages/DataEntry/optionCache.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst cache = {};\r\n\r\nexport async function getOption(path) {\r\n  if (cache[path]) {\r\n    return cache[path];\r\n  }\r\n\r\n  try {\r\n    const response = await axios.get(\r\n      `http://${process.env.REACT_APP_NETWORK}:${process.env.REACT_APP_PORT}/${path}`, \r\n      {\r\n        headers: {\r\n          Authorization: `Bearer ${localStorage.getItem(\"token\")}`\r\n        }\r\n      }\r\n    );\r\n\r\n    let data = response.data;\r\n    if (typeof data === \"string\") {\r\n      data = JSON.parse(data);\r\n    }\r\n\r\n    const options = data.data.map(([id, name]) => ({ id, name }));\r\n\r\n    cache[path] = options; // Cache the result\r\n\r\n    return options;\r\n  } catch (error) {\r\n    console.error(`Failed to fetch ${path}:`, error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport async function getAllOptions() {\r\n  const paths = {\r\n    suppliers: \"supplierDetails\",\r\n    consignees: \"consignee\",\r\n    emptyLocations: \"unloadVenue\",\r\n    status: \"status\",\r\n    type: \"containerType\",\r\n    shipping: \"shippingDocument\"\r\n  };\r\n\r\n  // Promise.all to fetch all simultaneously\r\n  const results = await Promise.all(\r\n    Object.values(paths).map(path => getOption(path))\r\n  );\r\n\r\n  return Object.keys(paths).reduce((acc, key, idx) => {\r\n    acc[key] = results[idx];\r\n    return acc;\r\n  }, {});\r\n}\r\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,KAAK,GAAG,CAAC,CAAC;AAEhB,OAAO,eAAeC,SAASA,CAACC,IAAI,EAAE;EACpC,IAAIF,KAAK,CAACE,IAAI,CAAC,EAAE;IACf,OAAOF,KAAK,CAACE,IAAI,CAAC;EACpB;EAEA,IAAI;IACF,MAAMC,QAAQ,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAC9B,UAAUC,OAAO,CAACC,GAAG,CAACC,iBAAiB,IAAIF,OAAO,CAACC,GAAG,CAACE,cAAc,IAAIN,IAAI,EAAE,EAC/E;MACEO,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;MACxD;IACF,CACF,CAAC;IAED,IAAIC,IAAI,GAAGV,QAAQ,CAACU,IAAI;IACxB,IAAI,OAAOA,IAAI,KAAK,QAAQ,EAAE;MAC5BA,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACF,IAAI,CAAC;IACzB;IAEA,MAAMG,OAAO,GAAGH,IAAI,CAACA,IAAI,CAACI,GAAG,CAAC,CAAC,CAACC,EAAE,EAAEC,IAAI,CAAC,MAAM;MAAED,EAAE;MAAEC;IAAK,CAAC,CAAC,CAAC;IAE7DnB,KAAK,CAACE,IAAI,CAAC,GAAGc,OAAO,CAAC,CAAC;;IAEvB,OAAOA,OAAO;EAChB,CAAC,CAAC,OAAOI,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,mBAAmBlB,IAAI,GAAG,EAAEkB,KAAK,CAAC;IAChD,OAAO,EAAE;EACX;AACF;AAEA,OAAO,eAAeE,aAAaA,CAAA,EAAG;EACpC,MAAMC,KAAK,GAAG;IACZC,SAAS,EAAE,iBAAiB;IAC5BC,UAAU,EAAE,WAAW;IACvBC,cAAc,EAAE,aAAa;IAC7BC,MAAM,EAAE,QAAQ;IAChBC,IAAI,EAAE,eAAe;IACrBC,QAAQ,EAAE;EACZ,CAAC;;EAED;EACA,MAAMC,OAAO,GAAG,MAAMC,OAAO,CAACC,GAAG,CAC/BC,MAAM,CAACC,MAAM,CAACX,KAAK,CAAC,CAACN,GAAG,CAACf,IAAI,IAAID,SAAS,CAACC,IAAI,CAAC,CAClD,CAAC;EAED,OAAO+B,MAAM,CAACE,IAAI,CAACZ,KAAK,CAAC,CAACa,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,EAAEC,GAAG,KAAK;IAClDF,GAAG,CAACC,GAAG,CAAC,GAAGR,OAAO,CAACS,GAAG,CAAC;IACvB,OAAOF,GAAG;EACZ,CAAC,EAAE,CAAC,CAAC,CAAC;AACR","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}